## Запуск нескольких Docker-контейнеров с использованием Docker Compose
- Напишем Dockerfile-ы для 7 сервисов. В качества примера приведу Dockerfile для сервиса gateway
![](./Photo/1.png)
- Проверим размер каждого собранного образа
![](./Photo/2.png)
- Напишем Docker-compose для сервисов и хранилищ данных (PostgreSQL, RabbitMQ)
![](./Photo/3.png)
- Запустим приложение
![](./Photo/4.png)
- Убедимся, что приложение корректно работает
![](./Photo/5.png)
- Запустим заготовленные тесты через postman
![](./Photo/6.png)
## Создание виртуальных машин
- Напишем Vagrantfile для создания одно вм
![](./Photo/7.png)
- Напишем скрипт, для установки необходимых программ и для запуска dcoker-compose файла
![](./Photo/8.png)
- Запустим вм при помощи комагды `vagrant up --provider virtualbox` и проверим, что вм запустилась
![](./Photo/9.png)
- Зайдем на вм и убедимся, что исходный код скопировался в нужное место. А так же проверим, что приложение поднялось и все контейнеры работают
![](./Photo/10.png)
## Создание простейшего Docker Swarm
- Модифицируем Vagrantfile. Добавим три define, а именно manager1, worker1, worker2
![](./Photo/11.png)
- Напишем скрипты для установки docker, настройки swarm кластера
![](./Photo/13.png)
![](./Photo/12.png)
![](./Photo/14.png)
- Загрузим собранные образы на Docker Hub
![](./Photo/15.png)
- Модифицируем docker-compose.yml
![](./Photo/16.png)
- Поднимем ноды при помощи vagrand
![](./Photo/17.png)
- Запустим сервисы на виртуальных машинах. Проверим что они работают на разных нодах
![](./Photo/18.png)
- Допишем docker-compose.yml, добавим сервис nginx
![](./Photo/19.png)
- Создадим конфигурационный файл nginx
![](./Photo/20.png)
- Запустим стак сервисов, проверим что они запущены
![](./Photo/21.png)
- Запустим заготовленные тест через Postman
![](./Photo/22.png)
- Убедимся, что сервисы распределены по узлам
![](./Photo/23.png)
- Визуализация при помощи Portiner
![](./Photo/24.png)